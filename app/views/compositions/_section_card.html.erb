<tr>
  <td>
    <h5><%= composition.section[index]["title"] %></h5>
    <div class='col-lg-12 card-container'>
      <div class='card bg-dark text-white'>
        <table class='table table-striped table-dark status'>
          <tr class='subheader'>
            <% if composition.section[index]["objects"][0][:resource_type] == "ServiceRequest" %>
              <td>
                Category
              </td>
              <td>
                Request
              </td>
              <td>
                Status
              </td>
            <% else %>
              <td>
                Type
              </td>
              <td>
                Preference
              </td>
            <% end %>          
          </tr>

          <% composition.section[index]["objects"].each do |current_object| %>
          <tr>
            <% if current_object[:resource_type] == "ServiceRequest" %>
              <td>
                <%= current_object[:category] %>
              </td>
              <td>
                <% unless current_object[:request].empty? %>
                  <b><%= current_object[:request] %></b><br />
                <% end %>
                <%= current_object[:request_text] %>
              </td>
              <td>
                <%= current_object[:status] %>
              </td>
            <% else %>
              <td>
                <%= current_object[:type] %>
              </td>
              <td>
                <% unless current_object[:preference].empty? %>
                  <b><%= current_object[:preference] %></b><br />
                <% end %>
                <%= current_object[:preference_text] %>
              </td>
            <% end %>
          </tr>
          <% end %>
        </table>
      </div>
    </div>
  </td>
</tr>
